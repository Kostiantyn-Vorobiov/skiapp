
Showing logs for build [32mjenkins-oscar-skiapp-pr-20-pr-b-w66th-6[0m stage [32mfrom-build-pack[0m and container [32mstep-credential-initializer-v9kvq[0m
{"level":"warn","ts":1589415871.0099037,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/0.8.0-**-support-backwards-incompats\" is not a valid GitHub commit ID"}
{"level":"info","ts":1589415871.0108514,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mjenkins-oscar-skiapp-pr-20-pr-b-w66th-6[0m stage [32mfrom-build-pack[0m and container [32mstep-working-dir-initializer-vpnn7[0m
{"level":"warn","ts":1589415872.4604702,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1589415872.4619663,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mjenkins-oscar-skiapp-pr-20-pr-b-w66th-6[0m stage [32mfrom-build-pack[0m and container [32mstep-place-tools[0m

Showing logs for build [32mjenkins-oscar-skiapp-pr-20-pr-b-w66th-6[0m stage [32mfrom-build-pack[0m and container [32mstep-git-source-jenkins-oscar-skiapp-pr-20-pr-b-w66th-5zhjs[0m
{"level":"warn","ts":1589415879.5776067,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/0.8.0-**-support-backwards-incompats\" is not a valid GitHub commit ID"}
{"level":"info","ts":1589415880.6367266,"logger":"fallback-logger","caller":"git/git.go:103","msg":"Successfully cloned https://github.com/jenkins-oscar/skiapp.git @ master in path /workspace/source"}

Showing logs for build [32mjenkins-oscar-skiapp-pr-20-pr-b-w66th-6[0m stage [32mfrom-build-pack[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=master:2f7d10fb451befa1e51a8a1714c248bda730deaa,20:84f32c1af6412f8f06c8465aee51b666f9dc36d1
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git fetch origin --unshallow 84f32c1af6412f8f06c8465aee51b666f9dc36d1: 2f7d10fb451befa1e51a8a1714c248bda730deaa:
DEBUG: ran git fetch --unshallow origin 84f32c1af6412f8f06c8465aee51b666f9dc36d1: 2f7d10fb451befa1e51a8a1714c248bda730deaa: in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git branch
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git checkout master
DEBUG: ran git checkout master in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git reset --hard 2f7d10fb451befa1e51a8a1714c248bda730deaa
DEBUG: ran git reset --hard 2f7d10fb451befa1e51a8a1714c248bda730deaa in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git clean -fd .
DEBUG: ran clean --force -d . in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git merge 84f32c1af6412f8f06c8465aee51b666f9dc36d1
DEBUG: ran git merge 84f32c1af6412f8f06c8465aee51b666f9dc36d1 in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git log --format=%H%x1f%an%x1f%ae%x1f%cn%x1f%ce%x1f%s%n%b%x1e 2f7d10fb451befa1e51a8a1714c248bda730deaa..HEAD
Merged SHA 84f32c1af6412f8f06c8465aee51b666f9dc36d1 with commit message 'changing to scan before post-build-post-build task' into base branch master
Merged SHA d167111c42b9f55a6b5ec543e87793995ef2cc7f with commit message 'adding env vars' into base branch master
Merged SHA 4f58a8561edf48271fa5ef42623f5b1825d663c6 with commit message 'appending step to scan image after build' into base branch master
Merged SHA 3bcb98c6b18cf817ac677b1f554bc9531a2543b5 with commit message 'changed registry to port 80' into base branch master
Merged SHA 3491021e00a26e0dd6c647b7b753add237ba9288 with commit message 'added registry port env var' into base branch master
Merged SHA 1c3115a4c3e4fd80e15ae0186e28ffa651d918a5 with commit message 'added registry port env var' into base branch master
Merged SHA 2de5ecc7429263ae8b1f06a72fd460353781e214 with commit message 'adding global var for pipeline' into base branch master

Showing logs for build [32mjenkins-oscar-skiapp-pr-20-pr-b-w66th-6[0m stage [32mfrom-build-pack[0m and container [32mstep-build-npmrc[0m
Command "credential" is deprecated, it will be removed on Jun 1 2020.  This is replaced by Tekton's mounted secrets
WARNING: failed to find Secret npm-token in namespace **

Showing logs for build [32mjenkins-oscar-skiapp-pr-20-pr-b-w66th-6[0m stage [32mfrom-build-pack[0m and container [32mstep-build-npm-install[0m
npm WARN skiapp@1.0.0 No repository field.
npm WARN skiapp@1.0.0 No license field.

added 152 packages from 599 contributors and audited 152 packages in 4.493s
found 4 low severity vulnerabilities
  run `npm audit fix` to fix them, or `npm audit` for details

Showing logs for build [32mjenkins-oscar-skiapp-pr-20-pr-b-w66th-6[0m stage [32mfrom-build-pack[0m and container [32mstep-build-npm-test[0m

> skiapp@1.0.0 test /workspace/source
> ./node_modules/mocha/bin/mocha tests/ --exit

Server running at http://localhost:8080


  GET Home page
    âœ“ Should return a 200 ok response


  1 passing (31ms)


Showing logs for build [32mjenkins-oscar-skiapp-pr-20-pr-b-w66th-6[0m stage [32mfrom-build-pack[0m and container [32mstep-build-container-build[0m
[36mINFO[0m[0000] Downloading base image node:9-slim           
ERROR: logging before flag.Parse: E0514 00:24:49.353673      10 metadata.go:142] while reading 'google-dockercfg' metadata: http status code: 404 while fetching url http://metadata.google.internal./computeMetadata/v1/instance/attributes/google-dockercfg
ERROR: logging before flag.Parse: E0514 00:24:49.357480      10 metadata.go:159] while reading 'google-dockercfg-url' metadata: http status code: 404 while fetching url http://metadata.google.internal./computeMetadata/v1/instance/attributes/google-dockercfg-url
2020/05/14 00:24:49 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0001] Error while retrieving image from cache: getting file info: stat /workspace/sha256:0e0175bbe4f8d9d104590d8d2c591017874e30977cb71aaff1cf6fa99479575c: no such file or directory 
[36mINFO[0m[0001] Downloading base image node:9-slim           
2020/05/14 00:24:50 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0001] Executing 0 build triggers                   
[36mINFO[0m[0001] cmd: EXPOSE                                  
[36mINFO[0m[0001] Adding exposed port: 8080/tcp                
[36mINFO[0m[0001] Using files from context: [/workspace/source] 
[36mINFO[0m[0001] Skipping unpacking as no commands require it. 
[36mINFO[0m[0001] Taking snapshot of full filesystem...        
[36mINFO[0m[0001] ENV PORT 8080                                
[36mINFO[0m[0001] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0001] EXPOSE 8080                                  
[36mINFO[0m[0001] cmd: EXPOSE                                  
[36mINFO[0m[0001] Adding exposed port: 8080/tcp                
[36mINFO[0m[0001] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0001] WORKDIR /usr/src/app                         
[36mINFO[0m[0001] cmd: workdir                                 
[36mINFO[0m[0001] Changed working directory to /usr/src/app    
[36mINFO[0m[0001] Creating directory /usr/src/app              
[36mINFO[0m[0001] Taking snapshot of files...                  
[36mINFO[0m[0001] Using files from context: [/workspace/source] 
[36mINFO[0m[0002] COPY . .                                     
[36mINFO[0m[0002] Taking snapshot of files...                  
[36mINFO[0m[0003] CMD ["npm", "start"]                         
[36mINFO[0m[0003] No files changed in this command, skipping snapshotting. 
2020/05/14 00:24:53 existing blob: sha256:e01bd28a434b56ffd2a3fe9aa99b9b69aecca69904843edd30b1ee7150d79904
2020/05/14 00:24:53 existing blob: sha256:5bba3ecb4cd6374a19da45f2a3db0a9c0804984358b3bb4b666c28944016e5ff
2020/05/14 00:24:53 existing blob: sha256:196b8e3c919d5639193ba6c6e54774528942041bbc37606631a2250502985c3c
2020/05/14 00:24:53 existing blob: sha256:a88538b9cd05cfa611e43a25582a95ad7879f6fa708b0386a26b71ee62235bb3
2020/05/14 00:24:53 existing blob: sha256:7d083412657baa2dafba8d093034ef26f9ed2c90fb6ed95f76bb55aff03ed429
2020/05/14 00:24:55 pushed blob: sha256:ee0a0fe1550ebfbaac9757809efc550f4168c55e5c7b261091fab54615b63a74
2020/05/14 00:24:55 pushed blob: sha256:da5fea06707196c81eda4b52188ce81e169bee3bf38b8dd05cc40caaa998c000
2020/05/14 00:24:56 pushed blob: sha256:3e3a108ede56ce3364fb7f0e01df518f30e97a7d932fcb02c57a0144e3d41cdd
2020/05/14 00:24:56 gcr.io/**-development/skiapp:0.0.0-SNAPSHOT-PR-20-6: digest: sha256:0c77479de01476d560fa25385a21ff5826f4cb8ac0a862b9a26e5056ce895263 size: 1407

Showing logs for build [32mjenkins-oscar-skiapp-pr-20-pr-b-w66th-6[0m stage [32mfrom-build-pack[0m and container [32mstep-postbuild-post-build[0m
no CVE provider running in the current ** namespace so skip adding image to be analysed

Showing logs for build [32mjenkins-oscar-skiapp-pr-20-pr-b-w66th-6[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-make-preview[0m
sed -i -e "s/version:.*/version: 0.0.0-SNAPSHOT-PR-20-6/" Chart.yaml
sed -i -e "s/version:.*/version: 0.0.0-SNAPSHOT-PR-20-6/" ../*/Chart.yaml
sed -i -e "s|repository:.*|repository: gcr.io\/**-development\/skiapp|" values.yaml
sed -i -e "s/tag:.*/tag: 0.0.0-SNAPSHOT-PR-20-6/" values.yaml
echo "  version: 0.0.0-SNAPSHOT-PR-20-6" >> requirements.yaml
** step helm build
WARNING: No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: storage.googleapis.com https://storage.googleapis.com/chartmuseum.jenkins-x.io
Successfully added Helm repository storage.googleapis.com.
Adding missing Helm repo: jenkins-x-chartmuseum http://jenkins-x-chartmuseum:8080
Successfully added Helm repository jenkins-x-chartmuseum.
WARNING: No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: chartmuseum.jenkins-x.io http://chartmuseum.jenkins-x.io
Successfully added Helm repository chartmuseum.jenkins-x.io.

Showing logs for build [32mjenkins-oscar-skiapp-pr-20-pr-b-w66th-6[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-jx-preview[0m
Creating a preview
Found commit author match for: sharepointoscar with email address: me@sharepointoscar.com
expose:
  Annotations:
    helm.sh/hook: post-install,post-upgrade
    helm.sh/hook-delete-policy: hook-succeeded
  config:
    domain: 35.197.97.96.nip.io
    exposer: Ingress
    http: "true"
preview:
  image:
    repository: gcr.io/**-development/skiapp
    tag: 0.0.0-SNAPSHOT-PR-20-6

Updating PipelineActivities jenkins-oscar-skiapp-pr-20-6 which has status Running
Preview application is now available at: http://skiapp.**-jenkins-oscar-skiapp-pr-20.35.197.97.96.nip.io
