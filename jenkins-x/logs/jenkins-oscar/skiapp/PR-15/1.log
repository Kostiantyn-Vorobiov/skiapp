
Showing logs for build [32mjenkins-oscar-skiapp-pr-15-pr-b-sw8kr-1[0m stage [32mfrom-build-pack[0m and container [32mstep-credential-initializer-fvrmp[0m
{"level":"warn","ts":1587490928.9776182,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/0.8.0-**-support-backwards-incompats\" is not a valid GitHub commit ID"}
{"level":"info","ts":1587490928.9783385,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mjenkins-oscar-skiapp-pr-15-pr-b-sw8kr-1[0m stage [32mfrom-build-pack[0m and container [32mstep-working-dir-initializer-lv7mz[0m
{"level":"warn","ts":1587490929.9113467,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1587490929.9155502,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mjenkins-oscar-skiapp-pr-15-pr-b-sw8kr-1[0m stage [32mfrom-build-pack[0m and container [32mstep-place-tools[0m

Showing logs for build [32mjenkins-oscar-skiapp-pr-15-pr-b-sw8kr-1[0m stage [32mfrom-build-pack[0m and container [32mstep-git-source-jenkins-oscar-skiapp-pr-15-pr-b-sw8kr-2n58m[0m
{"level":"warn","ts":1587490937.130654,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/0.8.0-**-support-backwards-incompats\" is not a valid GitHub commit ID"}
{"level":"info","ts":1587490938.7007363,"logger":"fallback-logger","caller":"git/git.go:103","msg":"Successfully cloned https://github.com/jenkins-oscar/skiapp.git @ master in path /workspace/source"}

Showing logs for build [32mjenkins-oscar-skiapp-pr-15-pr-b-sw8kr-1[0m stage [32mfrom-build-pack[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=master:4f11b1b12c9d5e7304072e9a7581542a13bba229,15:bfaf0de1ea23441599dbf3c23ff21d07673924e2
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git fetch origin --unshallow bfaf0de1ea23441599dbf3c23ff21d07673924e2: 4f11b1b12c9d5e7304072e9a7581542a13bba229:
DEBUG: ran git fetch --unshallow origin bfaf0de1ea23441599dbf3c23ff21d07673924e2: 4f11b1b12c9d5e7304072e9a7581542a13bba229: in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git branch
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git checkout master
DEBUG: ran git checkout master in 
DEBUG: JX_LOG_LEVEL=error LC_ALL=C git reset --hard 4f11b1b12c9d5e7304072e9a7581542a13bba229
DEBUG: ran git reset --hard 4f11b1b12c9d5e7304072e9a7581542a13bba229 in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git clean -fd .
DEBUG: ran clean --force -d . in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git merge bfaf0de1ea23441599dbf3c23ff21d07673924e2
DEBUG: ran git merge bfaf0de1ea23441599dbf3c23ff21d07673924e2 in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git log --format=%H%x1f%an%x1f%ae%x1f%cn%x1f%ce%x1f%s%n%b%x1e 4f11b1b12c9d5e7304072e9a7581542a13bba229..HEAD
Merged SHA 0c0c45dea32616d4e554e571871a5b6af9d77201 with commit message 'Merge commit 'bfaf0de1ea23441599dbf3c23ff21d07673924e2'' into base branch master
Merged SHA bfaf0de1ea23441599dbf3c23ff21d07673924e2 with commit message 'fixing global nav' into base branch master

Showing logs for build [32mjenkins-oscar-skiapp-pr-15-pr-b-sw8kr-1[0m stage [32mfrom-build-pack[0m and container [32mstep-build-npmrc[0m
Command "credential" is deprecated, it will be removed on Jun 1 2020.  This is replaced by Tekton's mounted secrets
WARNING: failed to find Secret npm-token in namespace **

Showing logs for build [32mjenkins-oscar-skiapp-pr-15-pr-b-sw8kr-1[0m stage [32mfrom-build-pack[0m and container [32mstep-build-npm-install[0m
npm WARN skiapp@1.0.0 No repository field.
npm WARN skiapp@1.0.0 No license field.

added 152 packages from 599 contributors and audited 269 packages in 7.39s
found 1 low severity vulnerability
  run `npm audit fix` to fix them, or `npm audit` for details

Showing logs for build [32mjenkins-oscar-skiapp-pr-15-pr-b-sw8kr-1[0m stage [32mfrom-build-pack[0m and container [32mstep-build-npm-test[0m

> skiapp@1.0.0 test /workspace/source
> ./node_modules/mocha/bin/mocha tests/ --exit

Server running at http://localhost:8080


  GET Home page
    âœ“ Should return a 200 ok response


  1 passing (40ms)


Showing logs for build [32mjenkins-oscar-skiapp-pr-15-pr-b-sw8kr-1[0m stage [32mfrom-build-pack[0m and container [32mstep-build-container-build[0m
[36mINFO[0m[0000] Downloading base image node:9-slim           
ERROR: logging before flag.Parse: E0421 17:42:31.054523      11 metadata.go:142] while reading 'google-dockercfg' metadata: http status code: 404 while fetching url http://metadata.google.internal./computeMetadata/v1/instance/attributes/google-dockercfg
ERROR: logging before flag.Parse: E0421 17:42:31.058038      11 metadata.go:159] while reading 'google-dockercfg-url' metadata: http status code: 404 while fetching url http://metadata.google.internal./computeMetadata/v1/instance/attributes/google-dockercfg-url
2020/04/21 17:42:31 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0001] Error while retrieving image from cache: getting file info: stat /workspace/sha256:0e0175bbe4f8d9d104590d8d2c591017874e30977cb71aaff1cf6fa99479575c: no such file or directory 
[36mINFO[0m[0001] Downloading base image node:9-slim           
2020/04/21 17:42:32 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0001] Executing 0 build triggers                   
[36mINFO[0m[0001] cmd: EXPOSE                                  
[36mINFO[0m[0001] Adding exposed port: 8080/tcp                
[36mINFO[0m[0001] Using files from context: [/workspace/source] 
[36mINFO[0m[0001] Skipping unpacking as no commands require it. 
[36mINFO[0m[0001] Taking snapshot of full filesystem...        
[36mINFO[0m[0001] ENV PORT 8080                                
[36mINFO[0m[0001] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0001] EXPOSE 8080                                  
[36mINFO[0m[0001] cmd: EXPOSE                                  
[36mINFO[0m[0001] Adding exposed port: 8080/tcp                
[36mINFO[0m[0001] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0001] WORKDIR /usr/src/app                         
[36mINFO[0m[0001] cmd: workdir                                 
[36mINFO[0m[0001] Changed working directory to /usr/src/app    
[36mINFO[0m[0001] Creating directory /usr/src/app              
[36mINFO[0m[0001] Taking snapshot of files...                  
[36mINFO[0m[0001] Using files from context: [/workspace/source] 
[36mINFO[0m[0002] COPY . .                                     
[36mINFO[0m[0003] Taking snapshot of files...                  
[36mINFO[0m[0003] CMD ["npm", "start"]                         
[36mINFO[0m[0003] No files changed in this command, skipping snapshotting. 
2020/04/21 17:42:35 existing blob: sha256:7d083412657baa2dafba8d093034ef26f9ed2c90fb6ed95f76bb55aff03ed429
2020/04/21 17:42:35 existing blob: sha256:196b8e3c919d5639193ba6c6e54774528942041bbc37606631a2250502985c3c
2020/04/21 17:42:35 existing blob: sha256:5bba3ecb4cd6374a19da45f2a3db0a9c0804984358b3bb4b666c28944016e5ff
2020/04/21 17:42:35 existing blob: sha256:a88538b9cd05cfa611e43a25582a95ad7879f6fa708b0386a26b71ee62235bb3
2020/04/21 17:42:35 existing blob: sha256:e01bd28a434b56ffd2a3fe9aa99b9b69aecca69904843edd30b1ee7150d79904
2020/04/21 17:42:36 pushed blob: sha256:a1bb58801c5606d2a8b28538fb497477d8989b69d0706f917872535bb6f598c7
2020/04/21 17:42:37 pushed blob: sha256:b5df6c4580e9d3e4549bdf96545730564338d99acc666065c5ca45b2ae4d6a55
2020/04/21 17:42:38 pushed blob: sha256:24520a52efe79f843485e4754cb775e229ef7658bac87dcb7f003d453c774419
2020/04/21 17:42:38 gcr.io/**-development/skiapp:0.0.0-SNAPSHOT-PR-15-1: digest: sha256:f6d08846f1b202f249f8b63bc00c48f798255a45e6377b34f5303b2abb179079 size: 1407

Showing logs for build [32mjenkins-oscar-skiapp-pr-15-pr-b-sw8kr-1[0m stage [32mfrom-build-pack[0m and container [32mstep-postbuild-post-build[0m
no CVE provider running in the current ** namespace so skip adding image to be analysed

Showing logs for build [32mjenkins-oscar-skiapp-pr-15-pr-b-sw8kr-1[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-make-preview[0m
sed -i -e "s/version:.*/version: 0.0.0-SNAPSHOT-PR-15-1/" Chart.yaml
sed -i -e "s/version:.*/version: 0.0.0-SNAPSHOT-PR-15-1/" ../*/Chart.yaml
sed -i -e "s|repository:.*|repository: gcr.io\/**-development\/skiapp|" values.yaml
sed -i -e "s/tag:.*/tag: 0.0.0-SNAPSHOT-PR-15-1/" values.yaml
echo "  version: 0.0.0-SNAPSHOT-PR-15-1" >> requirements.yaml
** step helm build
WARNING: No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: storage.googleapis.com https://storage.googleapis.com/chartmuseum.jenkins-x.io
Successfully added Helm repository storage.googleapis.com.
Adding missing Helm repo: jenkins-x-chartmuseum http://jenkins-x-chartmuseum:8080
Successfully added Helm repository jenkins-x-chartmuseum.
WARNING: No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: chartmuseum.jenkins-x.io http://chartmuseum.jenkins-x.io
Successfully added Helm repository chartmuseum.jenkins-x.io.

Showing logs for build [32mjenkins-oscar-skiapp-pr-15-pr-b-sw8kr-1[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-jx-preview[0m
Creating a preview
Found commit author match for: sharepointoscar with email address: me@sharepointoscar.com
Created environment jenkins-oscar-skiapp-pr-15
Namespace **-jenkins-oscar-skiapp-pr-15 created 
expose:
  Annotations:
    helm.sh/hook: post-install,post-upgrade
    helm.sh/hook-delete-policy: hook-succeeded
  config:
    domain: 35.197.97.96.nip.io
    exposer: Ingress
    http: "true"
preview:
  image:
    repository: gcr.io/**-development/skiapp
    tag: 0.0.0-SNAPSHOT-PR-15-1

Updating PipelineActivities jenkins-oscar-skiapp-pr-15-1 which has status Running
Preview application is now available at: http://skiapp.**-jenkins-oscar-skiapp-pr-15.35.197.97.96.nip.io
